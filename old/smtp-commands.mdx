# SMTP - Commands


# üëâ¬†Overview

---

### üëÄ¬†What ?

> SMTP (Simple Mail Transfer Protocol) is a protocol that enables the sending of emails over the Internet. The SMTP commands are the set of instructions used to send, receive, and relay outgoing mail between email senders and receivers.
> 

### üßê¬†Why ?

> Understanding SMTP commands is crucial as it helps in troubleshooting email sending and receiving problems. It's also important for email servers administration and for cybersecurity professionals to detect and prevent email-based threats.
> 

### ‚õèÔ∏è¬†How ?

> SMTP commands are used in the communication between the mail client and the mail server. These commands include HELO (or EHLO) to identify the client, MAIL FROM to specify the sender, RCPT TO to specify the recipient, DATA to transmit the body of the message, and QUIT to end the session. Each of these commands is sent by the client and a response is expected from the server.
> 

### ‚è≥¬†When ?

> SMTP was first introduced in 1982 as part of the Internet standards. SMTP commands have been used since then to facilitate email communication over the Internet.
> 

# ‚öôÔ∏è¬†Technical Explanations

---

SMTP, or Simple Mail Transfer Protocol, is a communication protocol for electronic mail transmission. The system operates in a client-server model where the email client sends commands to the server and the server responds with status codes and messages.

An SMTP session begins with the client sending a HELO or EHLO command to the server, together with the client's domain name or IP address. The server then responds with a three-digit status code. A '250' status code indicates that the operation was successful, allowing the client to proceed with the next command. On the other hand, a '500' status code indicates a syntax error in the command.

The client then sends the MAIL FROM command which specifies the sender's email address, and the RCPT TO command, which specifies the recipient's email address. After these commands, the DATA command is sent to initiate the transmission of the email body. This command is followed by the email content and a period on a line by itself to signal the end of the message.

Once the email has been sent, the client sends the QUIT command to end the SMTP session. The server then closes the connection and the email is delivered to the recipient's mailbox.

While SMTP is the standard protocol for sending emails, it's not inherently secure and is susceptible to interception and eavesdropping. As a result, it's often used with security extensions like STARTTLS or SMTPS to encrypt the data and ensure secure transmission of information. STARTTLS upgrades a plain text connection to an encrypted (TLS or SSL) connection, while SMTPS, on the other hand, is a method for securing SMTP with transport layer security. It's intended to provide authentication of the communication partners, as well as data integrity and confidentiality.

SMTP is an essential part of the email infrastructure and understanding how it works helps in troubleshooting email issues, configuring mail servers, and securing email communications. It's used globally by email providers, businesses, and individuals for sending email.

Let's walk through an example of an SMTP session for sending an email. This is purely hypothetical, but it helps illustrate how the SMTP commands work. Imagine we have an email client (e.g., Outlook or Thunderbird) trying to send an email.

1. **HELO or EHLO**: The client initiates the SMTP session by sending a `HELO` or `EHLO` command to the SMTP server. The command might look like this: `HELO client.example.com`.
2. **Server Response**: The server responds with a status code. A successful operation is indicated by a `250` status code. The response might be: `250 smtp.server.com Hello client.example.com`.
3. **MAIL FROM**: The client specifies the sender's email address by sending a `MAIL FROM` command. The command might look like this: `MAIL FROM: sender@example.com`.
4. **Server Response**: The server confirms the receipt of the `MAIL FROM` command with a `250` status code. The response might be: `250 2.1.0 sender@example.com... Sender ok`.
5. **RCPT TO**: The client specifies the recipient's email address by sending a `RCPT TO` command. The command might look like this: `RCPT TO: recipient@example.com`.
6. **Server Response**: The server confirms the receipt of the `RCPT TO` command with a `250` status code. The response might be: `250 2.1.5 recipient@example.com... Recipient ok`.
7. **DATA**: The client initiates the transmission of the email body by sending a `DATA` command. The command might be: `DATA`.
8. **Server Response**: The server acknowledges the `DATA` command and is ready to receive the email body. The response might be: `354 Enter mail, end with "." on a line by itself`.
9. **Email Content**: The client now sends the email content, ending with a period on a line by itself. This is a sample email content:

```
Subject: Test Email
This is a test email.
.

```

1. **QUIT**: Once the email has been sent, the client sends the `QUIT` command to end the SMTP session. The command is: `QUIT`.

Remember, SMTP is not secure on its own and is vulnerable to interception and eavesdropping. Therefore, it's often used with security extensions like STARTTLS or SMTPS to encrypt the data and ensure secure transmission of information.
