# Java JSF ViewState (.faces) Deserialization


# 👉 Overview

---

### 👀 What ?

JavaServer Faces (JSF) ViewState Deserialization is a process in which serialized ViewState data is transformed back into a Java object. ViewState is a mechanism used by JSF to store the state of a UI component between client requests. The data is stored as a serialized Java object, often in a hidden field within the HTML form. When the form is submitted, the ViewState data is deserialized and the state of the UI components is restored.


### 🧐 Why ?

Understanding JSF ViewState Deserialization is crucial because it's a common target for attackers. If an attacker can manipulate the serialized ViewState data, they can potentially exploit deserialization vulnerabilities to execute arbitrary code, bypass authentication, or perform other unauthorized activities. As such, it's important for developers and security professionals to understand how ViewState deserialization works and how to secure it.


### ⛏️ How ?

To use ViewState Deserialization securely, follow these steps: 1) Always encrypt ViewState data to prevent attackers from viewing or modifying it. 2) Use a secure, up-to-date algorithm for serialization and deserialization. 3) Implement input validation to reject any ViewState data that has been tampered with. 4) Limit the types of objects that can be deserialized to reduce the attack surface. 5) Consider using a security framework or library that provides built-in protections against deserialization attacks.


### ⏳ When ?

JSF ViewState Deserialization has been a standard feature of JSF since its initial release in 2004. However, the security implications of deserialization have become more widely understood and exploited in recent years.


# ⚙️ Technical Explanations

---

JSF ViewState Deserialization begins when the client submits a form that includes a hidden field containing the serialized ViewState data. This data is encoded as a base64 string. The JSF framework decodes the string and then deserializes it, transforming it back into a Java object that represents the state of the UI components. If an attacker can modify the serialized data before it's deserialized, they can alter the state of the UI components or even introduce malicious code. To prevent this, it's crucial to encrypt the ViewState data and implement stringent input validation.
