# Finds path of OverlayFS mount for container


# üëâ¬†Overview

---

### üëÄ¬†What ?

> OverlayFS is a type of union file system. It allows the file system of an application (such as a Docker container) to be overlaid on the host filesystem, merging the contents of the two filesystems while keeping their physical storage separate. The OverlayFS mount path for a container is the location in the host filesystem where the container's filesystem is overlaid.
> 

### üßê¬†Why ?

> Understanding the path of OverlayFS mount for a container is key in managing and troubleshooting containers, especially in a Docker environment. With the rise in Microservices architecture, the use of containers has become increasingly popular. Hence, understanding the underlying file system and how it interacts with the host can aid in efficient container management and can also have security implications.
> 

### ‚õèÔ∏è¬†How ?

> To find the path of the OverlayFS mount for a container, you can inspect the container's metadata. In a Docker environment, this can be done with the command 'docker inspect <container_id>', which returns a JSON object containing detailed information about the container. The mount path can be found under the 'GraphDriver' field, in the 'Data' sub-field named 'MergedDir'. This path represents the root directory of the container's filesystem on the host.
> 

### ‚è≥¬†When ?

> OverlayFS was introduced in Linux kernel 3.18, released in December 2014. Docker began supporting it as a storage driver in version 1.12, released in July 2016.
> 

# ‚öôÔ∏è¬†Technical Explanations

---

OverlayFS is a type of union filesystem that effectively merges multiple filesystems, providing a unified view. This merging occurs by overlaying one filesystem (upper) onto another (lower). The fundamental principle is that any modifications are recorded in the upper filesystem, while the lower filesystem remains unaltered. This separation ensures that changes can be easily tracked and reversed if necessary.

In the context of Docker containers, the lower filesystem is the image that the container is based on. This is a read-only layer. The upper filesystem, on the other hand, is a writable layer that is unique to each container. Any changes a container makes to its filesystem, such as creating, modifying, or deleting files, are recorded in this upper, writable layer.

The OverlayFS mount path is the point in the host filesystem where the lower (base image) and upper (writable layer) filesystems are merged. This path represents the root directory of the container's filesystem. Knowing the location of this mount point is critical for system administrators because it allows them to access the container's files directly on the host machine. This is particularly useful for various administrative tasks, including troubleshooting, performing backups, and more.

To find the OverlayFS mount path for a Docker container, you can use the 'docker inspect <container_id>' command, which returns a JSON object with detailed information about the container. The mount path is located under the 'GraphDriver' field, in the 'Data' sub-field named 'MergedDir'.

Understanding the principles of OverlayFS and its implementation in Docker containers provides valuable insights into container management and can also have significant security implications. For instance, having access to the mount path of a container could potentially allow unauthorized modifications if proper security measures are not in place. Therefore, it's not only essential to understand how OverlayFS works but also to ensure that it's securely configured.

For example, let's say you have a running Docker container with the ID `abc123`. You would like to find the OverlayFS mount path for this container.

1. Begin by running the Docker inspect command:

```bash
docker inspect abc123

```

This command will return a JSON object with detailed information about the container.

1. In the output, look for the 'GraphDriver' field. Under this field, you will find a 'Data' sub-field. In this 'Data' sub-field, look for 'MergedDir'. The value of 'MergedDir' is the OverlayFS mount path for the container.

The output would look something like this:

```json
"GraphDriver": {
    "Data": {
        "LowerDir": "/var/lib/docker/overlay2/abc123-init/diff:/var/lib/docker/overlay2/abc123/diff",
        "MergedDir": "/var/lib/docker/overlay2/abc123/merged",
        "UpperDir": "/var/lib/docker/overlay2/abc123/diff",
        "WorkDir": "/var/lib/docker/overlay2/abc123/work"
    },
    "Name": "overlay2"
},

```

In this example, the OverlayFS mount path for the container is `/var/lib/docker/overlay2/abc123/merged`. This is the path in the host filesystem where the lower and upper filesystems of the container are merged. By accessing this path, system administrators can directly access the container's files on the host machine which is useful for various administrative tasks.

Remember, it's essential to ensure proper security measures are in place to prevent unauthorized access or modifications at this mount path.
