# 27017,27018 - Pentesting MongoDB


# üëâ¬†Overview

---

### üëÄ¬†What ?

Pentesting MongoDB is a process of testing the MongoDB database for vulnerabilities that an attacker might exploit. MongoDB is a commonly used NoSQL database, and by default, it listens on ports 27017 and 27018.


### üßê¬†Why ?

Pentesting MongoDB is crucial because it is one of the most popular databases used in web applications today. As such, it is a common target for attackers. Identifying and patching vulnerabilities in MongoDB can prevent unauthorized data access, data corruption, and other security breaches.


### ‚õèÔ∏è¬†How ?

Pentesting MongoDB involves several steps. First, identify the MongoDB instance by scanning for the default ports (27017 and 27018). Second, attempt to connect to the database. If successful, this indicates a lack of authentication. Third, use database commands to retrieve, add, modify, or delete data. Finally, report on the findings and give recommendations for improving security.


### ‚è≥¬†When ?

Pentesting MongoDB should be conducted regularly as part of a comprehensive security strategy. It is especially important to test after installing new software or making changes to the database configuration.


# ‚öôÔ∏è¬†Technical Explanations

---

MongoDB is a popular NoSQL database that, by default, lacks authentication. This means any user can connect to the database and perform any operation, including retrieving, modifying, or deleting data. These actions could open the door to unauthorized data access, data corruption, and other security breaches.

To mitigate these risks, regular penetration testing (pentesting) is essential. Pentesting is a simulated cyber attack where professional ethical hackers attempt to exploit the vulnerabilities in a system. In the case of MongoDB, pentesting involves multiple steps.

First, a scan is conducted to identify open ports, specifically the default ports 27017 and 27018, to locate the MongoDB instance.

Next, an attempt is made to connect to the database. If this connection attempt is successful, it indicates that the database lacks authentication, which is a critical security flaw that needs to be addressed immediately.

Once connected, various operations are performed on the database, such as retrieving, adding, modifying, or deleting data. These actions help determine the extent of potential damage an attacker could inflict on the database.

The findings from these tests are then compiled into a report, detailing all discovered vulnerabilities and recommendations for improving security. This might include implementing authentication, enabling encryption, or setting up firewalls.

It's important to note that pentesting should be a regular part of a company's security strategy. The frequency of tests will depend on several factors, such as the sensitivity of data stored in the database, regulatory requirements, or after significant changes to the database configuration or application code.

Through regular and thorough pentesting, vulnerabilities in MongoDB can be identified and addressed, significantly improving the database's security and reducing the likelihood of a successful cyber attack.

Let's consider a hypothetical scenario where we are conducting a penetration test on a MongoDB instance. The primary tool we'll use for this example is `nmap`, a popular network scanning tool.

1. **Identify MongoDB instance:** We start by identifying the MongoDB instance by scanning the default ports (27017 and 27018). The command for this might look like:

```
nmap -p 27017,27018 <target-ip

```

This command will scan the mentioned ports on the target IP address. If MongoDB is running and listening on either of these ports, the output will indicate that these ports are open.

1. **Attempt to connect:** Once we've identified the MongoDB instance, we attempt to connect to it. We can use the `mongo` shell command for this:

```
mongo --host <target-ip--port 27017

```

If the connection is successful, this indicates a lack of authentication, a serious security flaw that needs to be addressed immediately.

1. **Perform operations:** After the successful connection, we can perform various operations to understand the potential damage an attacker could inflict. For example, we might retrieve data with the command `db.collection.find()` or try adding new data with `db.collection.insert()`.

```
use myDB
db.myCollection.find()

```

This command will attempt to switch to 'myDB' and then list all the documents in 'myCollection'. If this operation is successful, it means that an attacker could potentially access and misuse this data.

1. **Reporting:** After testing, we would compile our findings into a detailed report. This report would highlight vulnerabilities (like the lack of authentication), the potential impacts, and recommended security measures (like implementing authentication, enabling encryption, or setting up firewalls).

Remember that this is a simplified example. In a real penetration test, the process would be much more complex and comprehensive, and it should always be carried out by trained professionals.
