# ICMP type & Code


# üëâ¬†Overview

---

### üëÄ¬†What ?

> ICMP, or Internet Control Message Protocol, is a network layer protocol used for network devices to send error messages indicating, for instance, that a requested service is not available or that a host or router could not be reached. The type and code fields in an ICMP message are critical for understanding the nature and source of the problem.
> 

### üßê¬†Why ?

> Understanding ICMP types and codes is important because they assist in diagnosing network issues and can also be utilized for security purposes. ICMP messages can signal network congestion, unreachable hosts, or other issues that can affect network performance. It's also important because ICMP can be exploited for malicious purposes, such as denial of service (DoS) attacks.
> 

### ‚õèÔ∏è¬†How ?

> To use ICMP type and code information, you would need to monitor and analyze ICMP traffic on your network. Tools such as 'ping', 'traceroute', or network monitoring software can help with this task. When you see an ICMP message, you can refer to the type and code to understand what the message is about. For example, type 3, code 3 means 'Port Unreachable'. However, beware of false positives. For instance, type 3, code 4 ('Fragmentation Needed and DF was Set') is a normal part of path MTU discovery.
> 

### ‚è≥¬†When ?

> ICMP has been in use since 1981, when it was defined in RFC 792. However, it's still widely used today in all IP-based networks.
> 

# ‚öôÔ∏è¬†Technical Explanations

---

ICMP, or Internet Control Message Protocol, is a critical element within the network layer of the internet protocol suite. It is utilized by network devices like routers and hosts to send error messages and operational information. These messages indicate issues such as an unreachable host or service or if the network is congested.

ICMP messages are created in response to errors in IP (Internet Protocol) datagrams or for diagnostic or routing purposes. They are carried within IP datagrams and are identified by the 'type' field in the ICMP message, which also has an 'IP protocol number' of 1. Each type has a series of associated codes that provide further detail about the particular message. For example, a 'type' of 3 and a 'code' of 3 would indicate a 'Port Unreachable' message.

The Internet Protocol (IP) is implemented on top of the Network Access Layer, which offers a basic network service. This service is used by other protocols to transmit message segments. Though ICMP as a protocol does not consume significant network bandwidth, it is integral to any IP-based network implementation.

It's important to understand ICMP types and codes as they assist in diagnosing network issues. They are also crucial in network security as they can be exploited for malicious activities like Denial of Service (DoS) attacks. To effectively use ICMP type and code information, network traffic should be monitored and analyzed. Tools such as 'ping', 'traceroute', or network monitoring software can be useful for this task.

In summary, ICMP plays a vital role in the efficient operation and troubleshooting of IP-based networks. Despite being in use since 1981, when it was defined in RFC 792, its importance in modern network infrastructure remains undiminished.

For instance, suppose you want to diagnose a network connectivity issue between your computer and a remote server. You might use the 'ping' command, which sends ICMP Echo Request messages to the server and waits for an ICMP Echo Reply message.

Here's how you might use the command:

```
ping www.example.com

```

This command sends multiple ICMP Echo Request messages to [www.example.com](http://www.example.com/). Each time the server receives an Echo Request, it should send back an Echo Reply. The time it takes for the reply to arrive is measured and outputted, giving you an idea of the latency between your computer and the server.

If, instead of receiving Echo Replies, you receive a 'Destination Host Unreachable' message, this indicates that the server couldn't be reached. This message is an ICMP message of type 3, code 1.

Now, suppose you want to trace the route that the ICMP messages are taking through the network. For this, you can use the 'traceroute' command:

```
traceroute www.example.com

```

This command sends out a series of ICMP Echo Request messages to [www.example.com](http://www.example.com/), each with an increasing Time To Live (TTL) value. Each router along the path decrements the TTL of the packet by 1. When the TTL reaches 0, the router discards the packet and sends back an ICMP 'Time Exceeded' message (type 11, code 0). By examining these 'Time Exceeded' messages, the 'traceroute' command can figure out the path that packets are taking from your computer to the server.

These examples illustrate how ICMP types and codes are used in practice to diagnose network issues and understand the network's topology.

# üñáÔ∏è¬†R√©f√©rences

---