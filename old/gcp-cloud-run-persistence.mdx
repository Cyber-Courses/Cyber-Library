# GCP - Cloud Run Persistence


# 👉 Overview

---

### 👀 What ?

> Google Cloud Platform's (GCP) Cloud Run is a managed compute platform that enables users to run stateless containers that are invocable via HTTP requests. However, Cloud Run does not natively support persistent storage. This means that any data written during the execution of a Cloud Run instance will be lost once the instance is terminated. However, there are ways to achieve persistence in Cloud Run applications by integrating with other GCP services such as Cloud Storage, Firestore, and Cloud SQL.
> 

### 🧐 Why ?

> Persistence is crucial in many applications, especially those that require data to be stored and retrieved across different sessions or instances. Because Cloud Run instances are ephemeral and stateless, any data generated during the execution of an instance is not automatically saved. This feature makes Cloud Run ideal for short-lived, compute-intensive tasks but not for applications that require data persistence. However, by leveraging other GCP services, users can achieve data persistence in Cloud Run applications.
> 

### ⛏️ How ?

> To achieve data persistence in a Cloud Run application, you can use a GCP service that supports persistent storage such as Cloud Storage, Firestore, or Cloud SQL. For example, to use Cloud Storage, you would first create a storage bucket, then write and read data to and from the bucket using the Google Cloud client libraries in your application's code. Similarly, to use Firestore or Cloud SQL, you would create a database instance, then use the appropriate client libraries to interact with the database in your application's code.
> 

### ⏳ When ?

> The need for persistence in Cloud Run applications arises when you have an application that needs to store and retrieve data across different sessions or instances. This could be a web application that needs to store user-generated content, a data processing application that needs to store intermediate results, or any other application that requires data to be saved and retrieved.
> 

# ⚙️ Technical Explanations

---

Under the hood, Cloud Run leverages the Knative project's serving API to handle the deployment and scaling of applications. Each application is packaged as a stateless container that can be invoked via HTTP requests. When a request is received, Cloud Run automatically scales the application by starting a new instance if necessary. When the request is completed, the instance is terminated, and any data written during the execution is lost. This is why Cloud Run instances are described as being ephemeral and stateless. To achieve persistence, data must be stored outside of the Cloud Run instance in a separate service that supports persistent storage.
