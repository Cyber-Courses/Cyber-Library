# CommonsCollection1 Payload - Java Transformers to Rutime exec() and Thread Sleep


# üëâ¬†Overview

---

### üëÄ¬†What ?

> CommonsCollection1 payload is a part of the Java deserialization attack where an attacker serializes malicious Java objects to execute arbitrary code on the server where these objects are deserialized. It uses Java Transformers to modify the runtime environment and execute 'Runtime exec()' function that allows running system commands, and 'Thread Sleep' function that pauses the execution of current thread.
> 

### üßê¬†Why ?

> Understanding CommonsCollection1 payload is crucial as it poses a significant security risk. When exploited, it can lead to Remote Code Execution (RCE) on the server, potentially compromising the entire system. Therefore, it's vital for developers and security professionals to understand this payload to protect systems against potential attacks.
> 

### ‚õèÔ∏è¬†How ?

> To protect against CommonsCollection1 payload, follow these steps: \n1. Avoid deserializing objects from untrusted sources.\n2. Implement input validation and proper error handling.\n3. Use a safe replacement for native deserialization.\n4. Update libraries to their latest version as some have patched this vulnerability.\n5. Employ runtime protection that detects and blocks deserialization attacks.
> 

### ‚è≥¬†When ?

> CommonsCollection1 payload began to be utilized widely after the discovery of the Java deserialization vulnerability in 2015. It's still in use due to the widespread use of vulnerable Java libraries and applications.
> 

# ‚öôÔ∏è¬†Technical Explanations

---

At its core, the CommonsCollection1 payload utilizes the InvokerTransformer class in the Apache Commons Collections library to perform arbitrary command execution. When an object containing an InvokerTransformer is deserialized, it executes the transform method on the specified command. The Runtime exec() method is then used to execute this command as a separate process in the server's environment. The Thread Sleep function is used to pause the execution of the current thread for a specified period, allowing the command to complete its execution before the thread continues. This payload is typically delivered to the target server through techniques such as HTTP requests or Remote Method Invocation (RMI).
