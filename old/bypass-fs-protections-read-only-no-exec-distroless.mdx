# Bypass FS protections: read-only / no-exec / Distroless


# üëâ¬†Overview

---

### üëÄ¬†What ?

> Bypassing filesystem protections such as read-only, no-exec, and distroless environments is a technique used by attackers to penetrate a system or network. These protections are designed to limit the actions that can be performed on a file or a directory. For instance, read-only prevents modifications, no-exec restricts execution, while distroless environments are minimal operating system images that provide only the essential functionalities, leaving out any unnecessary packages that could pose security risks.
> 

### üßê¬†Why ?

> Understanding how these bypass techniques work is crucial in cybersecurity for several reasons. Firstly, it helps in identifying potential vulnerabilities in a system or application. Secondly, it aids in the development of robust security measures against such attacks. Finally, it allows for the timely detection and response to any security breaches.
> 

### ‚õèÔ∏è¬†How ?

> Exploiting these protections involves a series of steps. Firstly, the attacker identifies a system or application with weak or misconfigured protections. This can be done using various tools or scripts. Once identified, the attacker then uses specially crafted commands or code to bypass the protections and perform unauthorized actions. The specific method of bypassing depends on the type of protection in place and the system or application targeted.
> 

### ‚è≥¬†When ?

> Bypassing filesystem protections has been in practice for quite some time. As long as there have been protections, there have also been ways to bypass them. However, the methods and techniques have evolved over time, with attackers continually finding new ways to exploit these protections.
> 

# ‚öôÔ∏è¬†Technical Explanations

---

Bypassing file system protections is a complex process that requires a deep understanding of system architectures and their specific protection mechanisms. These protections, such as read-only, no-exec, and distroless environments, are implemented to limit the actions that can be performed on a file or directory, thus securing the system from unauthorized access or modification.

When a system is configured as read-only, it means that the files or directories cannot be modified, preventing unauthorized changes. Attackers can bypass this by exploiting a vulnerability that allows them to mount the file system as read-write, thereby enabling them to alter the files.

No-exec protection, on the other hand, restricts the execution of files. This is often used to prevent the running of malicious scripts. However, attackers can circumvent this protection using a technique called return-oriented programming (ROP). ROP involves the use of sequences of instructions, called "gadgets," already present in the system's memory. By chaining these gadgets together, attackers can execute their code, bypassing no-exec protections.

Distroless environments are minimal operating system images that provide only the essential functionalities, omitting any unnecessary packages that could pose security risks. The minimalistic nature of distroless environments makes it harder for attacks to be detected. An attacker could take advantage of this by performing actions that would typically go unnoticed in such a streamlined system.

Understanding these bypass techniques is crucial in cybersecurity as it helps in identifying potential vulnerabilities, developing robust security measures against such attacks, and allowing for timely detection and response to any security breaches. It's worth noting however that the methods of bypassing depend on the type of protection in place and the system or application targeted, and as such, staying updated with the latest advancements in cybersecurity is essential.

For example, suppose there is a Linux system with a read-only file system. An attacker might try to bypass this protection using a command like the following:

```bash
mount -o remount,rw /

```

This command attempts to remount the root file system (`/`) as read-write (`rw`). If successful, the attacker could then modify files that were previously read-only.

As for bypassing no-exec protections, consider the case where an attacker has access to a system, but the files they want to execute have the no-exec protection enabled. Using return-oriented programming (ROP), the attacker could circumvent this protection. Although a full example of ROP would be complex and beyond the scope of this explanation, the basic idea is that the attacker finds small sequences of useful instructions (called "gadgets") in the existing code, and then tricks the system into executing these gadgets in an order chosen by the attacker.

Finally, for a distroless environment, an example might involve an attacker taking advantage of the limited logging capabilities. Because these environments are stripped down to the essentials, they often lack the comprehensive logging found in full-fledged systems. An attacker could use this to their advantage, performing actions that might raise flags in a more fully-featured environment but go unnoticed in a distroless one.

Each of these examples illustrates the process an attacker might use to bypass file system protections. However, it's important to note that these are just examples, and the specific techniques an attacker might use can vary widely depending on the specific system and protections in place.
