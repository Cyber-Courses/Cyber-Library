---
title: Exploiting MySQL with SLEEP in Subselect for SQL Injection
description: Learn to exploit MySQL using SLEEP in subselect for time-based SQL injection
  attacks.
keywords:
- MySQL
- SLEEP function
- subselect
- SQL injection
- blind timing attacks
- time-based vulnerability
- database security
---

# Using SLEEP in a Subselect

## Context

In this article, we explore how to exploit MySQL time-based SQL injection vulnerabilities by using the SLEEP function in a subselect. This technique exploits the delay introduced by SLEEP to infer database information through blind timing attacks. It is crucial for attackers to have a working knowledge of SQL queries, subselects, timing attacks, and specific concepts related to MySQL time-based injections.

## Theory

### SLEEP Function in MySQL

The SLEEP function in MySQL is used to pause the execution of a query for a specified number of seconds. This characteristic makes it valuable for timing-based SQL injection attacks, allowing attackers to introduce deliberate delays and craft discriminative conditions to retrieve hidden information.

### Subselects in SQL

A subselect, or subquery, is a SELECT statement nested within another SQL query. Subselects adjust the main query's logic and introduce delays via functions like SLEEP. Understanding how to leverage subselects enables more sophisticated and conditional timing attacks.

### Blind Timing Attacks

Blind timing attacks exploit delays created by the SLEEP function to infer information about the database system. By causing differential time delays in query execution based on conditions, attackers can extract abstract data from the database system efficiently without needing direct feedback.

## Practice

### Using SLEEP in a Subselect for Time-Based SQL Injection

This section walks through the process of using SLEEP in a subselect for a time-based SQL injection attack.

- **Identify a Vulnerable Parameter:** 
  Begin by analyzing the web application to locate a parameter vulnerable to SQL injection. This could involve testing each input field and query string to find exploitable points.

- **Basic Injection with SLEEP:**
  ```sql
  SELECT * FROM users WHERE id = 1 AND (SELECT SLEEP(5))--
  ```
  Insert the above SQL statement into the application where the vulnerable parameter is identified. This will pause (SLEEP) the execution for 5 seconds if successfully injected. Note any delays to confirm the success of the injection.

- **Conditional Logic Injection:**
  ```sql
  SELECT * FROM users WHERE id = 1 AND (SELECT IF(1=1,SLEEP(5),0))--
  ```
  Use conditional logic within subselects to introduce a delay based on specific conditions, such as `1=1`. If the condition is true, the query pauses; otherwise, it proceeds normally. This allows you to deduce boolean responses and iteratively extract data based on timing.

## Tools

- **sqlmap:** A popular tool for automating the detection and exploitation of SQL injection vulnerabilities, including time-based injections.

- **Burp Suite:** A comprehensive platform for web application security testing, useful for identifying and exploiting vulnerabilities in web apps through methods like SQL injection.

By mastering this technique, you can effectively leverage time-based vulnerabilities to extract sensitive information from poorly secured MySQL databases. This should only be done in ethical situations with full authorization and knowledge of its impact on the target system.